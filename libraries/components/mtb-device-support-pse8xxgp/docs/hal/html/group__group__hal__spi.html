<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Hardware Abstraction Layer (HAL)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Hardware Abstraction Layer (HAL)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__group__hal__spi.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">API Reference</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">SPI (Serial Peripheral Interface)<div class="ingroups"><a class="el" href="group__group__hal.html">HAL Drivers</a></div></div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<p >High level interface for interacting with the Serial Peripheral Interface (SPI). </p>
<p >The SPI protocol is a synchronous serial interface protocol. Devices operate in either controller or target mode. The controller initiates the data transfer.</p>
<h1><a class="anchor" id="section_spi_features"></a>
Features</h1>
<ul>
<li>Supports controller and target functionality.</li>
<li>Controller supports up to four target select lines</li>
<li>Configurable interrupt and callback assignment on SPI events: Data transfer to FIFO complete, Transfer complete and Transmission error - mtb_hal_spi_event_t</li>
<li>Supports changing baud rate of the transaction in run time.</li>
<li>Provides functions to send/receive a single byte or block of data.</li>
</ul>
<h1><a class="anchor" id="section_spi_quickstart"></a>
Quick Start</h1>
<p >Initialise a SPI controller or target interface using the PDL. The data rate can be set using <a class="el" href="group__group__hal__spi.html#ga0f3e46217b46ed98ea29ca0a9fa9340a">mtb_hal_spi_set_frequency()</a>. <br  />
 See <a class="el" href="group__group__hal__spi.html#section_spi_snippets">Code snippets</a> for code snippets to send or receive the data.</p>
<h1><a class="anchor" id="section_spi_snippets"></a>
Code snippets</h1>
<h2><a class="anchor" id="subsection_spi_snippet_1"></a>
Snippet 1: SPI controller or target initialization</h2>
<p >The following code snippet initializes an SPI Controller or Target interface using the PDL. </p><div class="fragment"><div class="line">    <a class="code hl_typedef" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a>                   rslt;</div>
<div class="line">    <a class="code hl_struct" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a>               spi_inst;</div>
<div class="line">    cy_stc_scb_spi_context_t    spi_context;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Configuring the SPI interface: Specify the SPI interface pins, frame size, SPI Motorola</span></div>
<div class="line">    <span class="comment">// mode and slave/master mode</span></div>
<div class="line">    rslt = Cy_SCB_SPI_Init(SPI_HW, &amp;SPI_config, &amp;spi_context);</div>
<div class="line">    Cy_SCB_SPI_Enable(SPI_HW);</div>
<div class="line">    rslt = mtb_hal_spi_setup(&amp;spi_inst, &amp;SPI_hal_cfg, &amp;spi_context, NULL);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Activate SSEL pin you selected</span></div>
<div class="line">    Cy_SCB_SPI_SetActiveSlaveSelect(SPI_HW, CY_SCB_SPI_SLAVE_SELECT0);</div>
<div class="line"> </div>
<div class="ttc" id="agroup__group__result_html_gaca79700fcc701534ce61778a9bcf57d1"><div class="ttname"><a href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a></div><div class="ttdeci">uint32_t cy_rslt_t</div><div class="ttdoc">Provides the result of an operation as a structured bitfield.</div><div class="ttdef"><b>Definition:</b> cy_result.h:479</div></div>
<div class="ttc" id="astructmtb__hal__spi__t_html"><div class="ttname"><a href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a></div><div class="ttdoc">SPI object.</div><div class="ttdef"><b>Definition:</b> mtb_hal_hw_types_spi_scb.h:58</div></div>
</div><!-- fragment --><h2><a class="anchor" id="subsection_spi_snippet_2"></a>
Snippet 2: SPI controller - Single byte transfer operation (Read and Write)</h2>
<p >The following code snippet initializes an SPI Controller interface using the PDL. The data rate of transfer is set using <a class="el" href="group__group__hal__spi.html#ga0f3e46217b46ed98ea29ca0a9fa9340a">mtb_hal_spi_set_frequency()</a>. The code snippet shows how to transfer a single byte of data using <a class="el" href="group__group__hal__spi.html#ga2d632a03356463e361053298ab04c859">mtb_hal_spi_put()</a> and <a class="el" href="group__group__hal__spi.html#ga5cc0a0f76ffba41ed77d6e3c9751757c">mtb_hal_spi_get()</a>. </p><div class="fragment"><div class="line">    <a class="code hl_typedef" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a>       rslt;</div>
<div class="line">    <a class="code hl_struct" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a>   spi_controller;</div>
<div class="line">    uint32_t        spi_controller_frequency = 1000000;</div>
<div class="line">    uint32_t        transmit_data            = 0x01;</div>
<div class="line">    uint32_t        receive_data;</div>
<div class="line">    cy_stc_scb_spi_context_t   spi_context;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Configuring the SPI controller: Specify the SPI interface pins, frame size, SPI Motorola mode</span></div>
<div class="line">    <span class="comment">// and controller mode</span></div>
<div class="line">    rslt = Cy_SCB_SPI_Init(SPI_HW, &amp;SPI_config, &amp;spi_context);</div>
<div class="line">    Cy_SCB_SPI_Enable(SPI_HW);</div>
<div class="line">    rslt = mtb_hal_spi_setup(&amp;spi_controller, &amp;SPI_hal_cfg, &amp;spi_context, NULL);</div>
<div class="line">    Cy_SCB_SPI_SetActiveSlaveSelect(SPI_HW, CY_SCB_SPI_SLAVE_SELECT0);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Set the data rate to 1 Mbps</span></div>
<div class="line">    rslt = <a class="code hl_function" href="group__group__hal__spi.html#ga0f3e46217b46ed98ea29ca0a9fa9340a">mtb_hal_spi_set_frequency</a>(&amp;spi_controller, spi_controller_frequency);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Transfer one byte of data to the target.</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_define" href="group__group__result.html#gaf58fac450d9fff4472f03ad68f6e546e">CY_RSLT_SUCCESS</a> == <a class="code hl_function" href="group__group__hal__spi.html#ga2d632a03356463e361053298ab04c859">mtb_hal_spi_put</a>(&amp;spi_controller, transmit_data))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Receives one byte of data from the target by transmiting a dummy byte 0xFF.</span></div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code hl_define" href="group__group__result.html#gaf58fac450d9fff4472f03ad68f6e546e">CY_RSLT_SUCCESS</a> == <a class="code hl_function" href="group__group__hal__spi.html#ga5cc0a0f76ffba41ed77d6e3c9751757c">mtb_hal_spi_get</a>(&amp;spi_controller, &amp;receive_data))</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Transfer Complete and successful</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="ttc" id="agroup__group__hal__spi_html_ga0f3e46217b46ed98ea29ca0a9fa9340a"><div class="ttname"><a href="group__group__hal__spi.html#ga0f3e46217b46ed98ea29ca0a9fa9340a">mtb_hal_spi_set_frequency</a></div><div class="ttdeci">cy_rslt_t mtb_hal_spi_set_frequency(mtb_hal_spi_t *obj, uint32_t hz)</div><div class="ttdoc">Set the SPI baud rate.</div><div class="ttdef"><b>Definition:</b> mtb_hal_spi.c:276</div></div>
<div class="ttc" id="agroup__group__hal__spi_html_ga2d632a03356463e361053298ab04c859"><div class="ttname"><a href="group__group__hal__spi.html#ga2d632a03356463e361053298ab04c859">mtb_hal_spi_put</a></div><div class="ttdeci">cy_rslt_t mtb_hal_spi_put(mtb_hal_spi_t *obj, uint32_t value)</div><div class="ttdoc">Synchronously send a byte out.</div><div class="ttdef"><b>Definition:</b> mtb_hal_spi.c:368</div></div>
<div class="ttc" id="agroup__group__hal__spi_html_ga5cc0a0f76ffba41ed77d6e3c9751757c"><div class="ttname"><a href="group__group__hal__spi.html#ga5cc0a0f76ffba41ed77d6e3c9751757c">mtb_hal_spi_get</a></div><div class="ttdeci">cy_rslt_t mtb_hal_spi_get(mtb_hal_spi_t *obj, uint32_t *value)</div><div class="ttdoc">Synchronously get a received value out of the SPI receive buffer.</div><div class="ttdef"><b>Definition:</b> mtb_hal_spi.c:348</div></div>
<div class="ttc" id="agroup__group__result_html_gaf58fac450d9fff4472f03ad68f6e546e"><div class="ttname"><a href="group__group__result.html#gaf58fac450d9fff4472f03ad68f6e546e">CY_RSLT_SUCCESS</a></div><div class="ttdeci">#define CY_RSLT_SUCCESS</div><div class="ttdoc">cy_rslt_t return value indicating success</div><div class="ttdef"><b>Definition:</b> cy_result.h:506</div></div>
</div><!-- fragment --><h2><a class="anchor" id="subsection_spi_snippet_3"></a>
Snippet 3: SPI Target - Single byte transfer operation (Read and Write)</h2>
<p >The following code snippet initializes an SPI Target interface using the PDL. The data rate of transfer is set using <a class="el" href="group__group__hal__spi.html#ga0f3e46217b46ed98ea29ca0a9fa9340a">mtb_hal_spi_set_frequency</a>. The code snippet shows how to transfer a single byte of data using <a class="el" href="group__group__hal__spi.html#ga2d632a03356463e361053298ab04c859">mtb_hal_spi_put()</a> and <a class="el" href="group__group__hal__spi.html#ga5cc0a0f76ffba41ed77d6e3c9751757c">mtb_hal_spi_get</a>. </p><div class="fragment"><div class="line">    <a class="code hl_typedef" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a>       rslt;</div>
<div class="line">    <a class="code hl_struct" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a>   spi_target;</div>
<div class="line">    uint32_t        spi_target_frequency = 1000000;</div>
<div class="line">    uint32_t        transmit_data        = 1;</div>
<div class="line">    uint32_t        receive_data;</div>
<div class="line">    cy_stc_scb_spi_context_t   spi_context;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Configuring the SPI target: Specify the SPI interface pins, frame size, SPI Motorola mode</span></div>
<div class="line">    <span class="comment">// and target mode</span></div>
<div class="line">    rslt = Cy_SCB_SPI_Init(SPI_HW, &amp;SPI_config, &amp;spi_context);</div>
<div class="line">    Cy_SCB_SPI_Enable(SPI_HW);</div>
<div class="line">    rslt = mtb_hal_spi_setup(&amp;spi_target, &amp;SPI_hal_cfg, &amp;spi_context, NULL);</div>
<div class="line">    Cy_SCB_SPI_SetActiveSlaveSelect(SPI_HW, CY_SCB_SPI_SLAVE_SELECT0);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Set the data rate to 1 Mbps</span></div>
<div class="line">    rslt = <a class="code hl_function" href="group__group__hal__spi.html#ga0f3e46217b46ed98ea29ca0a9fa9340a">mtb_hal_spi_set_frequency</a>(&amp;spi_target, spi_target_frequency);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Place a byte in the TX FIFO to be read by the controller</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_define" href="group__group__result.html#gaf58fac450d9fff4472f03ad68f6e546e">CY_RSLT_SUCCESS</a> == <a class="code hl_function" href="group__group__hal__spi.html#ga2d632a03356463e361053298ab04c859">mtb_hal_spi_put</a>(&amp;spi_target, transmit_data))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Get a received value out of the SPI receive buffer. This API Blocks until a value is</span></div>
<div class="line">        <span class="comment">// available</span></div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code hl_define" href="group__group__result.html#gaf58fac450d9fff4472f03ad68f6e546e">CY_RSLT_SUCCESS</a> == <a class="code hl_function" href="group__group__hal__spi.html#ga5cc0a0f76ffba41ed77d6e3c9751757c">mtb_hal_spi_get</a>(&amp;spi_target, &amp;receive_data))</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Transfer successful</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
</div><!-- fragment --><h2><a class="anchor" id="subsection_spi_snippet_4"></a>
Snippet 4: SPI Block Data transfer</h2>
<p >The following snippet sends and receives an array of data in a single SPI transaction using <a class="el" href="group__group__hal__spi.html#ga3ebc405007719a8bf3bab63067b1082e">mtb_hal_spi_transfer()</a>. The example uses SPI controller to transmit 5 bytes of data and receive 5 bytes of data in a single transaction. </p><div class="fragment"><div class="line"><a class="code hl_struct" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> spi__obj;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> spi_m_interrupt_callback(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="group__group__hal__spi.html#ga3fad1b35e2d2b2cfe869a993c58632cb">mtb_hal_spi_process_interrupt</a>(&amp;spi__obj);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> snippet_mtb_hal_spi_block_data_transfer(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_typedef" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a>   rslt;</div>
<div class="line">    uint32_t    spi_frequency    = 1000000;</div>
<div class="line">    uint8_t     transmit_data[5] = { 0x1, 0x2, 0x3, 0x4, 0x5 };</div>
<div class="line">    uint8_t     receive_data[5];</div>
<div class="line">    cy_stc_scb_spi_context_t   spi_context;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Configuring the SPI interface: Specify the SPI interface pins, frame size, SPI Motorola</span></div>
<div class="line">    <span class="comment">// mode and target/controller mode</span></div>
<div class="line">    rslt = Cy_SCB_SPI_Init(SPI_HW, &amp;SPI_config, &amp;spi_context);</div>
<div class="line">    Cy_SCB_SPI_Enable(SPI_HW);</div>
<div class="line">    rslt = mtb_hal_spi_setup(&amp;spi__obj, &amp;SPI_hal_cfg, &amp;spi_context, NULL);</div>
<div class="line">    Cy_SCB_SPI_SetActiveSlaveSelect(SPI_HW, CY_SCB_SPI_SLAVE_SELECT0);</div>
<div class="line"> </div>
<div class="line">    cy_stc_sysint_t intr_cfg = { .intrSrc = SPI_IRQ, .intrPriority = INT_PRIORITY };</div>
<div class="line">    Cy_SysInt_Init(&amp;intr_cfg, spi_m_interrupt_callback);</div>
<div class="line">    NVIC_EnableIRQ(SPI_IRQ);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Set the data rate to 1 Mbps</span></div>
<div class="line">    rslt = <a class="code hl_function" href="group__group__hal__spi.html#ga0f3e46217b46ed98ea29ca0a9fa9340a">mtb_hal_spi_set_frequency</a>(&amp;spi__obj, spi_frequency);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Controller: Starts a data transfer. Target: Prepares the target for data transfer. It is a</span></div>
<div class="line">    <span class="comment">// blocking</span></div>
<div class="line">    <span class="comment">// function</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_define" href="group__group__result.html#gaf58fac450d9fff4472f03ad68f6e546e">CY_RSLT_SUCCESS</a> == <a class="code hl_function" href="group__group__hal__spi.html#ga3ebc405007719a8bf3bab63067b1082e">mtb_hal_spi_transfer</a>(&amp;spi__obj, transmit_data, 5u, receive_data, 5u,</div>
<div class="line">                                                0xFF))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Transfer Complete</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    (void)rslt;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="ttc" id="agroup__group__hal__spi_html_ga3ebc405007719a8bf3bab63067b1082e"><div class="ttname"><a href="group__group__hal__spi.html#ga3ebc405007719a8bf3bab63067b1082e">mtb_hal_spi_transfer</a></div><div class="ttdeci">cy_rslt_t mtb_hal_spi_transfer(mtb_hal_spi_t *obj, const uint8_t *tx, size_t tx_length, uint8_t *rx, size_t rx_length, uint8_t write_fill)</div><div class="ttdoc">Synchronously Write a block out and receive a value.</div><div class="ttdef"><b>Definition:</b> mtb_hal_spi.c:462</div></div>
<div class="ttc" id="agroup__group__hal__spi_html_ga3fad1b35e2d2b2cfe869a993c58632cb"><div class="ttname"><a href="group__group__hal__spi.html#ga3fad1b35e2d2b2cfe869a993c58632cb">mtb_hal_spi_process_interrupt</a></div><div class="ttdeci">cy_rslt_t mtb_hal_spi_process_interrupt(mtb_hal_spi_t *obj)</div><div class="ttdoc">Process interrupts related to a SPI instance.</div><div class="ttdef"><b>Definition:</b> mtb_hal_spi.c:561</div></div>
</div><!-- fragment --><h2><a class="anchor" id="subsection_spi_snippet_5"></a>
Snippet 5: SPI Target - Write Block Data</h2>
<p >The following snippet sends an array of data in a single SPI transaction using <a class="el" href="group__group__hal__spi.html#gabf7d1b275787ea669058a25d5bea783e">mtb_hal_spi_target_write()</a>. The example uses SPI target to transmit 5 bytes of data in a single transaction with 50 ms timeout values. </p><div class="fragment"><div class="line"><a class="code hl_struct" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> spi_s_obj;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> spi_s_interrupt_callback(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="group__group__hal__spi.html#ga3fad1b35e2d2b2cfe869a993c58632cb">mtb_hal_spi_process_interrupt</a>(&amp;spi_s_obj);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> snippet_mtb_hal_spi_target_write_block_data(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_typedef" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a>   rslt;</div>
<div class="line">    uint8_t     transmit_data[5] = { 0x1, 0x2, 0x3, 0x4, 0x5 };</div>
<div class="line">    uint16_t    buff_size = 5;</div>
<div class="line">    uint32_t    timeout = 50;</div>
<div class="line">    cy_stc_scb_spi_context_t   spi_context;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Configuring the SPI Target: Specify the SPI interface pins, frame size, SPI Motorola</span></div>
<div class="line">    <span class="comment">// mode and target mode</span></div>
<div class="line">    rslt = Cy_SCB_SPI_Init(SPI_HW, &amp;SPI_config, &amp;spi_context);</div>
<div class="line">    Cy_SCB_SPI_Enable(SPI_HW);</div>
<div class="line">    rslt = mtb_hal_spi_setup(&amp;spi_s_obj, &amp;SPI_hal_cfg, &amp;spi_context, NULL);</div>
<div class="line">    Cy_SCB_SPI_SetActiveSlaveSelect(SPI_HW, CY_SCB_SPI_SLAVE_SELECT0);</div>
<div class="line"> </div>
<div class="line">    cy_stc_sysint_t intr_cfg = { .intrSrc = SPI_IRQ, .intrPriority = INT_PRIORITY };</div>
<div class="line">    Cy_SysInt_Init(&amp;intr_cfg, spi_s_interrupt_callback);</div>
<div class="line">    NVIC_EnableIRQ(SPI_IRQ);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Target: Prepares the Tx data and wait Controller to start SPI transaction. It is a blocking</span></div>
<div class="line">    <span class="comment">// function within timout value.</span></div>
<div class="line">    rslt = <a class="code hl_function" href="group__group__hal__spi.html#gabf7d1b275787ea669058a25d5bea783e">mtb_hal_spi_target_write</a>(&amp;spi_s_obj, transmit_data, &amp;buff_size, timeout);</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_define" href="group__group__result.html#gaf58fac450d9fff4472f03ad68f6e546e">CY_RSLT_SUCCESS</a> == rslt)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Transfer Complete</span></div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Timeout or Bad Argument</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    (void)rslt;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="ttc" id="agroup__group__hal__spi_html_gabf7d1b275787ea669058a25d5bea783e"><div class="ttname"><a href="group__group__hal__spi.html#gabf7d1b275787ea669058a25d5bea783e">mtb_hal_spi_target_write</a></div><div class="ttdeci">cy_rslt_t mtb_hal_spi_target_write(mtb_hal_spi_t *obj, const uint8_t *src_buff, uint16_t *size, uint32_t timeout)</div><div class="ttdoc">Write data from the user-defined buffer to TX buffer and wait until either all data has been read fro...</div><div class="ttdef"><b>Definition:</b> mtb_hal_spi.c:432</div></div>
</div><!-- fragment --><h2><a class="anchor" id="subsection_spi_snippet_6"></a>
Snippet 6: Interrupts on SPI events</h2>
<p >SPI interrupt events (mtb_hal_spi_event_t) can be mapped to an interrupt and assigned to a callback function. The callback function needs to be first registered and then the event needs to be enabled. A callback function is registered using <a class="el" href="group__group__hal__spi.html#ga9dcb0faceb70ca33a722ba35815a33f8">mtb_hal_spi_register_callback</a> to notify whenever the SPI transfer is complete. </p><div class="fragment"><div class="line"><a class="code hl_struct" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> spi_obj;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> spi_interrupt_callback(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="group__group__hal__spi.html#ga3fad1b35e2d2b2cfe869a993c58632cb">mtb_hal_spi_process_interrupt</a>(&amp;spi_obj);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// SPI event handler</span></div>
<div class="line"><span class="keywordtype">void</span> spi_event_handler(<span class="keywordtype">void</span>* handler_arg, <a class="code hl_enumeration" href="group__group__hal__spi.html#gac7012d47f3054e7b3e207531e08351db">mtb_hal_spi_event_t</a> event)</div>
<div class="line">{</div>
<div class="line">    (void)handler_arg;</div>
<div class="line">    (void)event;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a> snippet_mtb_hal_spi_interrupt_callback_events(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_typedef" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a>   rslt;</div>
<div class="line">    uint32_t    spi_frequency = 1000000;</div>
<div class="line">    uint32_t    rx_transfer_count = 5, tx_transfer_count = 5;</div>
<div class="line">    uint8_t     receive_data[5];</div>
<div class="line">    uint8_t     transmit_data[5] = { 0x1, 0x2, 0x3, 0x4, 0x5 };</div>
<div class="line">    cy_stc_scb_spi_context_t   spi_context;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Configuring the SPI interface: Specify the SPI interface pins, frame size, SPI Motorola</span></div>
<div class="line">    <span class="comment">// mode and controller/target mode</span></div>
<div class="line">    rslt = Cy_SCB_SPI_Init(SPI_HW, &amp;SPI_config, &amp;spi_context);</div>
<div class="line">    Cy_SCB_SPI_Enable(SPI_HW);</div>
<div class="line">    rslt = mtb_hal_spi_setup(&amp;spi_obj, &amp;SPI_hal_cfg, &amp;spi_context, NULL);</div>
<div class="line">    Cy_SCB_SPI_SetActiveSlaveSelect(SPI_HW, CY_SCB_SPI_SLAVE_SELECT0);</div>
<div class="line"> </div>
<div class="line">    cy_stc_sysint_t intr_cfg = { .intrSrc = SPI_IRQ, .intrPriority = INT_PRIORITY };</div>
<div class="line">    Cy_SysInt_Init(&amp;intr_cfg, spi_interrupt_callback);</div>
<div class="line">    NVIC_EnableIRQ(SPI_IRQ);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Set the data rate to 1 Mbps</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_define" href="group__group__result.html#gaf58fac450d9fff4472f03ad68f6e546e">CY_RSLT_SUCCESS</a> == rslt)</div>
<div class="line">    {</div>
<div class="line">        rslt = <a class="code hl_function" href="group__group__hal__spi.html#ga0f3e46217b46ed98ea29ca0a9fa9340a">mtb_hal_spi_set_frequency</a>(&amp;spi_obj, spi_frequency);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_define" href="group__group__result.html#gaf58fac450d9fff4472f03ad68f6e546e">CY_RSLT_SUCCESS</a> == rslt)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Register a callback function to be called when the interrupt fires</span></div>
<div class="line">        <a class="code hl_function" href="group__group__hal__spi.html#ga9dcb0faceb70ca33a722ba35815a33f8">mtb_hal_spi_register_callback</a>(&amp;spi_obj, (<a class="code hl_typedef" href="group__group__hal__spi.html#ga624acbf39d283dee474cc25efacbe7b4">mtb_hal_spi_event_callback_t</a>)spi_event_handler,</div>
<div class="line">                                      NULL);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Enable the events that will trigger the call back function</span></div>
<div class="line">        <a class="code hl_function" href="group__group__hal__spi.html#gacd34ff8b2db7e9ebdc33c5a2ade404d6">mtb_hal_spi_enable_event</a>(&amp;spi_obj, <a class="code hl_enumvalue" href="group__group__hal__spi.html#ggac7012d47f3054e7b3e207531e08351dba44087672f13ef0f2d312f513217473d8">MTB_HAL_SPI_IRQ_DONE</a>, <span class="keyword">true</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Controller: Initiates a data transfer. Target: Prepares the target for data transfer. It</span></div>
<div class="line">        <span class="comment">// is a</span></div>
<div class="line">        <span class="comment">// non-blocking function</span></div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code hl_define" href="group__group__result.html#gaf58fac450d9fff4472f03ad68f6e546e">CY_RSLT_SUCCESS</a> ==</div>
<div class="line">            <a class="code hl_function" href="group__group__hal__spi.html#ga3ebc405007719a8bf3bab63067b1082e">mtb_hal_spi_transfer</a>(&amp;spi_obj, transmit_data, rx_transfer_count, receive_data,</div>
<div class="line">                                 tx_transfer_count, 0))</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// SPI Controller: Transfer started. SPI Target: Prepares for data transfer</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> rslt;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="ttc" id="agroup__group__hal__spi_html_ga624acbf39d283dee474cc25efacbe7b4"><div class="ttname"><a href="group__group__hal__spi.html#ga624acbf39d283dee474cc25efacbe7b4">mtb_hal_spi_event_callback_t</a></div><div class="ttdeci">void(* mtb_hal_spi_event_callback_t)(void *callback_arg, mtb_hal_spi_event_t event)</div><div class="ttdoc">Handler for SPI interrupts.</div><div class="ttdef"><b>Definition:</b> mtb_hal_spi.h:148</div></div>
<div class="ttc" id="agroup__group__hal__spi_html_ga9dcb0faceb70ca33a722ba35815a33f8"><div class="ttname"><a href="group__group__hal__spi.html#ga9dcb0faceb70ca33a722ba35815a33f8">mtb_hal_spi_register_callback</a></div><div class="ttdeci">void mtb_hal_spi_register_callback(mtb_hal_spi_t *obj, mtb_hal_spi_event_callback_t callback, void *callback_arg)</div><div class="ttdoc">Register a SPI callback handler.</div><div class="ttdef"><b>Definition:</b> mtb_hal_spi.c:547</div></div>
<div class="ttc" id="agroup__group__hal__spi_html_gac7012d47f3054e7b3e207531e08351db"><div class="ttname"><a href="group__group__hal__spi.html#gac7012d47f3054e7b3e207531e08351db">mtb_hal_spi_event_t</a></div><div class="ttdeci">mtb_hal_spi_event_t</div><div class="ttdoc">SPI interrupt triggers.</div><div class="ttdef"><b>Definition:</b> mtb_hal_spi.h:137</div></div>
<div class="ttc" id="agroup__group__hal__spi_html_gacd34ff8b2db7e9ebdc33c5a2ade404d6"><div class="ttname"><a href="group__group__hal__spi.html#gacd34ff8b2db7e9ebdc33c5a2ade404d6">mtb_hal_spi_enable_event</a></div><div class="ttdeci">void mtb_hal_spi_enable_event(mtb_hal_spi_t *obj, mtb_hal_spi_event_t event, bool enable)</div><div class="ttdoc">Configure SPI interrupt.</div><div class="ttdef"><b>Definition:</b> mtb_hal_spi.c:504</div></div>
<div class="ttc" id="agroup__group__hal__spi_html_ggac7012d47f3054e7b3e207531e08351dba44087672f13ef0f2d312f513217473d8"><div class="ttname"><a href="group__group__hal__spi.html#ggac7012d47f3054e7b3e207531e08351dba44087672f13ef0f2d312f513217473d8">MTB_HAL_SPI_IRQ_DONE</a></div><div class="ttdeci">@ MTB_HAL_SPI_IRQ_DONE</div><div class="ttdoc">Transfer complete.</div><div class="ttdef"><b>Definition:</b> mtb_hal_spi.h:142</div></div>
</div><!-- fragment --><h1><a class="anchor" id="subsection_spi_moreinfor"></a>
More Information</h1>
<p ><a href="https://github.com/infineon/mtb-example-psoc6-spi-controller"><b>mtb-example-psoc6-spi-controller</b></a>: This example project demonstrates use of SPI (HAL) resource in PSOC® 6 MCU in Controller mode to write data to an SPI target. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="groups" name="groups"></a>
API Reference</h2></td></tr>
<tr class="memitem:group__group__hal__results__spi"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__hal__results__spi.html">SPI HAL Results</a></td></tr>
<tr class="memdesc:group__group__hal__results__spi"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI specific return codes. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga624acbf39d283dee474cc25efacbe7b4"><td class="memItemLeft" align="right" valign="top"><a id="ga624acbf39d283dee474cc25efacbe7b4" name="ga624acbf39d283dee474cc25efacbe7b4"></a>
typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><b>mtb_hal_spi_event_callback_t</b>) (void *callback_arg, <a class="el" href="group__group__hal__spi.html#gac7012d47f3054e7b3e207531e08351db">mtb_hal_spi_event_t</a> event)</td></tr>
<tr class="memdesc:ga624acbf39d283dee474cc25efacbe7b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for SPI interrupts. <br /></td></tr>
<tr class="separator:ga624acbf39d283dee474cc25efacbe7b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gac7012d47f3054e7b3e207531e08351db"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__hal__spi.html#gac7012d47f3054e7b3e207531e08351db">mtb_hal_spi_event_t</a> { <br />
&#160;&#160;<a class="el" href="group__group__hal__spi.html#ggac7012d47f3054e7b3e207531e08351dbab43f656e5890a9470ad9b9058a3edc71">MTB_HAL_SPI_EVENT_NONE</a> = 0
, <br />
&#160;&#160;<a class="el" href="group__group__hal__spi.html#ggac7012d47f3054e7b3e207531e08351dba937a57bd009b5530c947fbad940453ae">MTB_HAL_SPI_IRQ_DATA_IN_FIFO</a> = (MTB_HAL_MAP_SPI_IRQ_DATA_IN_FIFO)
, <br />
&#160;&#160;<a class="el" href="group__group__hal__spi.html#ggac7012d47f3054e7b3e207531e08351dba44087672f13ef0f2d312f513217473d8">MTB_HAL_SPI_IRQ_DONE</a> = (MTB_HAL_MAP_SPI_IRQ_DONE)
, <br />
&#160;&#160;<a class="el" href="group__group__hal__spi.html#ggac7012d47f3054e7b3e207531e08351dba62d20cbc8eb9b51a77f02e1e364c2eb6">MTB_HAL_SPI_IRQ_ERROR</a> = (MTB_HAL_MAP_SPI_IRQ_ERROR)
<br />
 }</td></tr>
<tr class="memdesc:gac7012d47f3054e7b3e207531e08351db"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI interrupt triggers.  <a href="group__group__hal__spi.html#gac7012d47f3054e7b3e207531e08351db">More...</a><br /></td></tr>
<tr class="separator:gac7012d47f3054e7b3e207531e08351db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5518960186b11f881c436e4706ccef08"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__hal__spi.html#ga5518960186b11f881c436e4706ccef08">mtb_hal_spi_fifo_type_t</a> { <br />
&#160;&#160;<a class="el" href="group__group__hal__spi.html#gga5518960186b11f881c436e4706ccef08aeb9b0dc2335f5ce442d1a5cc730306e4">MTB_HAL_SPI_FIFO_RX</a>
, <br />
&#160;&#160;<a class="el" href="group__group__hal__spi.html#gga5518960186b11f881c436e4706ccef08a4aa8f18a35a7df76ba911f0777fcfbab">MTB_HAL_SPI_FIFO_TX</a>
<br />
 }</td></tr>
<tr class="memdesc:ga5518960186b11f881c436e4706ccef08"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI FIFO type.  <a href="group__group__hal__spi.html#ga5518960186b11f881c436e4706ccef08">More...</a><br /></td></tr>
<tr class="separator:ga5518960186b11f881c436e4706ccef08"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga0f3e46217b46ed98ea29ca0a9fa9340a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__hal__spi.html#ga0f3e46217b46ed98ea29ca0a9fa9340a">mtb_hal_spi_set_frequency</a> (<a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *obj, uint32_t hz)</td></tr>
<tr class="memdesc:ga0f3e46217b46ed98ea29ca0a9fa9340a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the SPI baud rate.  <a href="group__group__hal__spi.html#ga0f3e46217b46ed98ea29ca0a9fa9340a">More...</a><br /></td></tr>
<tr class="separator:ga0f3e46217b46ed98ea29ca0a9fa9340a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8ea4bcdd12cb51967fd838f1e8df92ff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__hal__spi.html#ga8ea4bcdd12cb51967fd838f1e8df92ff">mtb_hal_spi_set_fifo_level</a> (<a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *obj, <a class="el" href="group__group__hal__spi.html#ga5518960186b11f881c436e4706ccef08">mtb_hal_spi_fifo_type_t</a> type, uint16_t level)</td></tr>
<tr class="memdesc:ga8ea4bcdd12cb51967fd838f1e8df92ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a threshold level for a FIFO that will generate an interrupt and a trigger output.  <a href="group__group__hal__spi.html#ga8ea4bcdd12cb51967fd838f1e8df92ff">More...</a><br /></td></tr>
<tr class="separator:ga8ea4bcdd12cb51967fd838f1e8df92ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5cc0a0f76ffba41ed77d6e3c9751757c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__hal__spi.html#ga5cc0a0f76ffba41ed77d6e3c9751757c">mtb_hal_spi_get</a> (<a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *obj, uint32_t *value)</td></tr>
<tr class="memdesc:ga5cc0a0f76ffba41ed77d6e3c9751757c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronously get a received value out of the SPI receive buffer.  <a href="group__group__hal__spi.html#ga5cc0a0f76ffba41ed77d6e3c9751757c">More...</a><br /></td></tr>
<tr class="separator:ga5cc0a0f76ffba41ed77d6e3c9751757c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2d632a03356463e361053298ab04c859"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__hal__spi.html#ga2d632a03356463e361053298ab04c859">mtb_hal_spi_put</a> (<a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *obj, uint32_t value)</td></tr>
<tr class="memdesc:ga2d632a03356463e361053298ab04c859"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronously send a byte out.  <a href="group__group__hal__spi.html#ga2d632a03356463e361053298ab04c859">More...</a><br /></td></tr>
<tr class="separator:ga2d632a03356463e361053298ab04c859"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga33b8e3a79be6876015376bf5cdad68f8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__hal__spi.html#ga33b8e3a79be6876015376bf5cdad68f8">mtb_hal_spi_controller_write</a> (<a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *obj, const uint8_t *src_buff, uint16_t *size)</td></tr>
<tr class="memdesc:ga33b8e3a79be6876015376bf5cdad68f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write data from the user-defined buffer to the controller TX FIFO.  <a href="group__group__hal__spi.html#ga33b8e3a79be6876015376bf5cdad68f8">More...</a><br /></td></tr>
<tr class="separator:ga33b8e3a79be6876015376bf5cdad68f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga074f340d01e10976782211395d5b1939"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__hal__spi.html#ga074f340d01e10976782211395d5b1939">mtb_hal_spi_target_read</a> (<a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *obj, uint8_t *dst_buff, uint16_t *size, uint32_t timeout)</td></tr>
<tr class="memdesc:ga074f340d01e10976782211395d5b1939"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for controller send data to RX buffer and store them to the user-defined buffer.  <a href="group__group__hal__spi.html#ga074f340d01e10976782211395d5b1939">More...</a><br /></td></tr>
<tr class="separator:ga074f340d01e10976782211395d5b1939"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabf7d1b275787ea669058a25d5bea783e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__hal__spi.html#gabf7d1b275787ea669058a25d5bea783e">mtb_hal_spi_target_write</a> (<a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *obj, const uint8_t *src_buff, uint16_t *size, uint32_t timeout)</td></tr>
<tr class="memdesc:gabf7d1b275787ea669058a25d5bea783e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write data from the user-defined buffer to TX buffer and wait until either all data has been read from TX buffer and shift register, or timeout is hit.  <a href="group__group__hal__spi.html#gabf7d1b275787ea669058a25d5bea783e">More...</a><br /></td></tr>
<tr class="separator:gabf7d1b275787ea669058a25d5bea783e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3ebc405007719a8bf3bab63067b1082e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__hal__spi.html#ga3ebc405007719a8bf3bab63067b1082e">mtb_hal_spi_transfer</a> (<a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *obj, const uint8_t *tx, size_t tx_length, uint8_t *rx, size_t rx_length, uint8_t write_fill)</td></tr>
<tr class="memdesc:ga3ebc405007719a8bf3bab63067b1082e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronously Write a block out and receive a value.  <a href="group__group__hal__spi.html#ga3ebc405007719a8bf3bab63067b1082e">More...</a><br /></td></tr>
<tr class="separator:ga3ebc405007719a8bf3bab63067b1082e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3f9176dd8ca2fb3300818472d648fbe1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__hal__spi.html#ga3f9176dd8ca2fb3300818472d648fbe1">mtb_hal_spi_clear</a> (<a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *obj)</td></tr>
<tr class="memdesc:ga3f9176dd8ca2fb3300818472d648fbe1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the SPI buffers.  <a href="group__group__hal__spi.html#ga3f9176dd8ca2fb3300818472d648fbe1">More...</a><br /></td></tr>
<tr class="separator:ga3f9176dd8ca2fb3300818472d648fbe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9dcb0faceb70ca33a722ba35815a33f8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__hal__spi.html#ga9dcb0faceb70ca33a722ba35815a33f8">mtb_hal_spi_register_callback</a> (<a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *obj, <a class="el" href="group__group__hal__spi.html#ga624acbf39d283dee474cc25efacbe7b4">mtb_hal_spi_event_callback_t</a> callback, void *callback_arg)</td></tr>
<tr class="memdesc:ga9dcb0faceb70ca33a722ba35815a33f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a SPI callback handler.  <a href="group__group__hal__spi.html#ga9dcb0faceb70ca33a722ba35815a33f8">More...</a><br /></td></tr>
<tr class="separator:ga9dcb0faceb70ca33a722ba35815a33f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacd34ff8b2db7e9ebdc33c5a2ade404d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__hal__spi.html#gacd34ff8b2db7e9ebdc33c5a2ade404d6">mtb_hal_spi_enable_event</a> (<a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *obj, <a class="el" href="group__group__hal__spi.html#gac7012d47f3054e7b3e207531e08351db">mtb_hal_spi_event_t</a> event, bool enable)</td></tr>
<tr class="memdesc:gacd34ff8b2db7e9ebdc33c5a2ade404d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure SPI interrupt.  <a href="group__group__hal__spi.html#gacd34ff8b2db7e9ebdc33c5a2ade404d6">More...</a><br /></td></tr>
<tr class="separator:gacd34ff8b2db7e9ebdc33c5a2ade404d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3fad1b35e2d2b2cfe869a993c58632cb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__hal__spi.html#ga3fad1b35e2d2b2cfe869a993c58632cb">mtb_hal_spi_process_interrupt</a> (<a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *obj)</td></tr>
<tr class="memdesc:ga3fad1b35e2d2b2cfe869a993c58632cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process interrupts related to a SPI instance.  <a href="group__group__hal__spi.html#ga3fad1b35e2d2b2cfe869a993c58632cb">More...</a><br /></td></tr>
<tr class="separator:ga3fad1b35e2d2b2cfe869a993c58632cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gac7012d47f3054e7b3e207531e08351db" name="gac7012d47f3054e7b3e207531e08351db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac7012d47f3054e7b3e207531e08351db">&#9670;&nbsp;</a></span>mtb_hal_spi_event_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__group__hal__spi.html#gac7012d47f3054e7b3e207531e08351db">mtb_hal_spi_event_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SPI interrupt triggers. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggac7012d47f3054e7b3e207531e08351dbab43f656e5890a9470ad9b9058a3edc71" name="ggac7012d47f3054e7b3e207531e08351dbab43f656e5890a9470ad9b9058a3edc71"></a>MTB_HAL_SPI_EVENT_NONE&#160;</td><td class="fielddoc"><p >No event. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac7012d47f3054e7b3e207531e08351dba937a57bd009b5530c947fbad940453ae" name="ggac7012d47f3054e7b3e207531e08351dba937a57bd009b5530c947fbad940453ae"></a>MTB_HAL_SPI_IRQ_DATA_IN_FIFO&#160;</td><td class="fielddoc"><p >All transfer data has been moved into data FIFO. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac7012d47f3054e7b3e207531e08351dba44087672f13ef0f2d312f513217473d8" name="ggac7012d47f3054e7b3e207531e08351dba44087672f13ef0f2d312f513217473d8"></a>MTB_HAL_SPI_IRQ_DONE&#160;</td><td class="fielddoc"><p >Transfer complete. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac7012d47f3054e7b3e207531e08351dba62d20cbc8eb9b51a77f02e1e364c2eb6" name="ggac7012d47f3054e7b3e207531e08351dba62d20cbc8eb9b51a77f02e1e364c2eb6"></a>MTB_HAL_SPI_IRQ_ERROR&#160;</td><td class="fielddoc"><p >An error occurred while transferring data. </p>
</td></tr>
</table>

</div>
</div>
<a id="ga5518960186b11f881c436e4706ccef08" name="ga5518960186b11f881c436e4706ccef08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5518960186b11f881c436e4706ccef08">&#9670;&nbsp;</a></span>mtb_hal_spi_fifo_type_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__group__hal__spi.html#ga5518960186b11f881c436e4706ccef08">mtb_hal_spi_fifo_type_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SPI FIFO type. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga5518960186b11f881c436e4706ccef08aeb9b0dc2335f5ce442d1a5cc730306e4" name="gga5518960186b11f881c436e4706ccef08aeb9b0dc2335f5ce442d1a5cc730306e4"></a>MTB_HAL_SPI_FIFO_RX&#160;</td><td class="fielddoc"><p >RX FIFO for incoming data. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga5518960186b11f881c436e4706ccef08a4aa8f18a35a7df76ba911f0777fcfbab" name="gga5518960186b11f881c436e4706ccef08a4aa8f18a35a7df76ba911f0777fcfbab"></a>MTB_HAL_SPI_FIFO_TX&#160;</td><td class="fielddoc"><p >TX FIFO for outgoing datas. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga0f3e46217b46ed98ea29ca0a9fa9340a" name="ga0f3e46217b46ed98ea29ca0a9fa9340a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0f3e46217b46ed98ea29ca0a9fa9340a">&#9670;&nbsp;</a></span>mtb_hal_spi_set_frequency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a> mtb_hal_spi_set_frequency </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>hz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the SPI baud rate. </p>
<p >Actual frequency may differ from the desired frequency due to available dividers and bus clock Configures the SPI peripheral's baud rate </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">obj</td><td>The SPI object to configure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hz</td><td>The baud rate in Hz </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the set_frequency request </dd></dl>

</div>
</div>
<a id="ga8ea4bcdd12cb51967fd838f1e8df92ff" name="ga8ea4bcdd12cb51967fd838f1e8df92ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8ea4bcdd12cb51967fd838f1e8df92ff">&#9670;&nbsp;</a></span>mtb_hal_spi_set_fifo_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a> mtb_hal_spi_set_fifo_level </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group__hal__spi.html#ga5518960186b11f881c436e4706ccef08">mtb_hal_spi_fifo_type_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets a threshold level for a FIFO that will generate an interrupt and a trigger output. </p>
<p >The RX FIFO interrupt and trigger will be activated when the receive FIFO has more entries than the threshold. The TX FIFO interrupt and trigger will be activated when the transmit FIFO has less entries than the threshold.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj</td><td>The SPI object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>FIFO type to set level for </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">level</td><td>Level threshold to set. See the device datasheet for valid range. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the level set </dd></dl>

</div>
</div>
<a id="ga5cc0a0f76ffba41ed77d6e3c9751757c" name="ga5cc0a0f76ffba41ed77d6e3c9751757c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5cc0a0f76ffba41ed77d6e3c9751757c">&#9670;&nbsp;</a></span>mtb_hal_spi_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a> mtb_hal_spi_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronously get a received value out of the SPI receive buffer. </p>
<p >In Controller mode - transmits fill-in value and read the data from RxFifo In Target mode - Blocks until a value is available</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj</td><td>The SPI peripheral to read </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>The value received </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the read request </dd></dl>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>In Controller mode, CITO pin required to be non-NC for this API to operate</li>
<li>In Target mode, COTI pin required to be non-NC for this API to operate </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga2d632a03356463e361053298ab04c859" name="ga2d632a03356463e361053298ab04c859"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2d632a03356463e361053298ab04c859">&#9670;&nbsp;</a></span>mtb_hal_spi_put()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a> mtb_hal_spi_put </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronously send a byte out. </p>
<p >In Controller mode transmits value to target and read/drop a value from the RxFifo. In Target mode writes a value to TxFifo</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj</td><td>The SPI peripheral to use for sending </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>The value to send </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the write request </dd></dl>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>In Controller mode, COTI pin required to be non-NC for this API to operate</li>
<li>In Target mode, CITO pin required to be non-NC for this API to operate </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga33b8e3a79be6876015376bf5cdad68f8" name="ga33b8e3a79be6876015376bf5cdad68f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga33b8e3a79be6876015376bf5cdad68f8">&#9670;&nbsp;</a></span>mtb_hal_spi_controller_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a> mtb_hal_spi_controller_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>src_buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write data from the user-defined buffer to the controller TX FIFO. </p>
<p >Performs non-blocking controller-mode transfer of an array of data. NOTE: If the size of the actual data is less than the expected, the function will copy only the available data and return.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj</td><td>The SPI object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">src_buff</td><td>Pointer on memory to copy the data to the controller TX buffer. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">size</td><td>[in] The number of bytes to send, [out] number actually sent. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the write request </dd></dl>

</div>
</div>
<a id="ga074f340d01e10976782211395d5b1939" name="ga074f340d01e10976782211395d5b1939"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga074f340d01e10976782211395d5b1939">&#9670;&nbsp;</a></span>mtb_hal_spi_target_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a> mtb_hal_spi_target_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>dst_buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for controller send data to RX buffer and store them to the user-defined buffer. </p>
<p >NOTE: If size of actual data is less then expected the function copy only available data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj</td><td>The SPI object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dst_buff</td><td>Pointer on memory to store the data from the target RX buffer. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">size</td><td>[in] The number of bytes to read, [out] number actually read. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>Timeout in millisecond, set this value to 0 if you don't want to wait at all. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the read request </dd></dl>

</div>
</div>
<a id="gabf7d1b275787ea669058a25d5bea783e" name="gabf7d1b275787ea669058a25d5bea783e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabf7d1b275787ea669058a25d5bea783e">&#9670;&nbsp;</a></span>mtb_hal_spi_target_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a> mtb_hal_spi_target_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>src_buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write data from the user-defined buffer to TX buffer and wait until either all data has been read from TX buffer and shift register, or timeout is hit. </p>
<p >The user needs to provide the interrupt handler and call <a class="el" href="group__group__hal__spi.html#ga3fad1b35e2d2b2cfe869a993c58632cb">mtb_hal_spi_process_interrupt</a> to process the interrupt.</p>
<p >NOTE: If size of actual data is less then expected the function copy only available data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj</td><td>The SPI object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">src_buff</td><td>Pointer on memory to copy the data to the target TX buffer. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">size</td><td>[in] The number of bytes to send, [out] number actually sent. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>Timeout in millisecond, set this value to 0 if you don't want to wait at all. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the write request </dd></dl>

</div>
</div>
<a id="ga3ebc405007719a8bf3bab63067b1082e" name="ga3ebc405007719a8bf3bab63067b1082e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3ebc405007719a8bf3bab63067b1082e">&#9670;&nbsp;</a></span>mtb_hal_spi_transfer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a> mtb_hal_spi_transfer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>tx_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>rx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>rx_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>write_fill</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronously Write a block out and receive a value. </p>
<p >The total number of bytes sent and received will be the maximum of tx_length and rx_length. The bytes written will be padded (at the end) with the value given by write_fill. Using this function will block for the duration of the transfer. The user needs to provide the interrupt handler and call <a class="el" href="group__group__hal__spi.html#ga3fad1b35e2d2b2cfe869a993c58632cb">mtb_hal_spi_process_interrupt</a> to process the interrupt.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj</td><td>The SPI peripheral to use for sending </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tx</td><td>Pointer to the byte-array of data to write to the device </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">tx_length</td><td>Number of bytes to write, updated with the number actually written </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rx</td><td>Pointer to the byte-array of data to read from the device </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">rx_length</td><td>Number of bytes to read, updated with the number actually read </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">write_fill</td><td>Default data transmitted while performing a read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the transfer request </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Both COTI and CITO pins required to be non-NC for this API to operate </dd></dl>

</div>
</div>
<a id="ga3f9176dd8ca2fb3300818472d648fbe1" name="ga3f9176dd8ca2fb3300818472d648fbe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3f9176dd8ca2fb3300818472d648fbe1">&#9670;&nbsp;</a></span>mtb_hal_spi_clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a> mtb_hal_spi_clear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear the SPI buffers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj</td><td>The SPI object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the clear request </dd></dl>

</div>
</div>
<a id="ga9dcb0faceb70ca33a722ba35815a33f8" name="ga9dcb0faceb70ca33a722ba35815a33f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9dcb0faceb70ca33a722ba35815a33f8">&#9670;&nbsp;</a></span>mtb_hal_spi_register_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mtb_hal_spi_register_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group__hal__spi.html#ga624acbf39d283dee474cc25efacbe7b4">mtb_hal_spi_event_callback_t</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>callback_arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a SPI callback handler. </p>
<p >This function will be called when one of the events enabled by <a class="el" href="group__group__hal__spi.html#gacd34ff8b2db7e9ebdc33c5a2ade404d6">mtb_hal_spi_enable_event</a> occurs.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj</td><td>The SPI object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">callback</td><td>The callback handler which will be invoked when the interrupt fires </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">callback_arg</td><td>Generic argument that will be provided to the callback when called </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gacd34ff8b2db7e9ebdc33c5a2ade404d6" name="gacd34ff8b2db7e9ebdc33c5a2ade404d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacd34ff8b2db7e9ebdc33c5a2ade404d6">&#9670;&nbsp;</a></span>mtb_hal_spi_enable_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mtb_hal_spi_enable_event </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group__hal__spi.html#gac7012d47f3054e7b3e207531e08351db">mtb_hal_spi_event_t</a>&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure SPI interrupt. </p>
<p >This function is used for word-approach</p>
<p >When an enabled event occurs, the function specified by <a class="el" href="group__group__hal__spi.html#ga9dcb0faceb70ca33a722ba35815a33f8">mtb_hal_spi_register_callback</a> will be called.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj</td><td>The SPI object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">event</td><td>The SPI event type </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">enable</td><td>True to turn on interrupts, False to turn off </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga3fad1b35e2d2b2cfe869a993c58632cb" name="ga3fad1b35e2d2b2cfe869a993c58632cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3fad1b35e2d2b2cfe869a993c58632cb">&#9670;&nbsp;</a></span>mtb_hal_spi_process_interrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group__result.html#gaca79700fcc701534ce61778a9bcf57d1">cy_rslt_t</a> mtb_hal_spi_process_interrupt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmtb__hal__spi__t.html">mtb_hal_spi_t</a> *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process interrupts related to a SPI instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obj</td><td>HAL object for which the interrupt should be processed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CY_RSLT_SUCCESS if the interrupt was processed successfully; otherwise an error </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>Hardware Abstraction Layer (HAL)</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
