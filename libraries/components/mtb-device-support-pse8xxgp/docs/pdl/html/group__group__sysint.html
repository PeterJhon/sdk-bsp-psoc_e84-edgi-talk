<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MTB Peripheral Driver Library (PDL): SysInt       (System Interrupt)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="IFXCYP_one-line.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MTB Peripheral Driver Library (PDL)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__group__sysint.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">API Reference</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle"><div class="title">SysInt (System Interrupt)</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<p >The SysInt driver provides an API to configure the device peripheral interrupts. </p>
<p >It provides a lightweight interface to complement the <a href="https://www.keil.com/pack/doc/CMSIS/Core/html/group__NVIC__gr.html">CMSIS core NVIC API</a>. The provided functions are applicable for all cores in a device and they can be used to configure and connect device peripheral interrupts to one or more cores.</p>
<p >The functions and other declarations used in this driver are in cy_sysint.h. You can include cy_pdl.h to get access to all functions and declarations in the PDL.</p>
<h1><a class="anchor" id="group_sysint_vector_table"></a>
Vector Table</h1>
<h2><a class="anchor" id="group_sysint_CM33"></a>
CM33</h2>
<p >CM33 with Security extension supports two vector tables, one for secure world and another for non-secure world. Secure interrupt vector table is placed in the secure ROM/FLASH, where as non-secure interrupt vector table is placed in the non-secure ROM/FLASH. In both scenarios, vector tables are copied by the startup code to secure and non-secure RAM respectively. The symbol code __s_vector_table is the address of the secure vector table and __ns_vector_table is for the non-secure world in the startup code. The register SCB-&gt;VTOR holds the start address of the vector table. See group_system_config_device_vector_table section for the implementation details.</p>
<p >CM33 without Security extension will support only non-secure interrupts.</p>
<p >The default interrupt handler functions are defined to a dummy handler in the startup file. The naming convention is &lt;interrupt_name&gt;_IRQHandler.</p>
<h2><a class="anchor" id="group_sysint_CM55"></a>
CM55</h2>
<p >CM55 is without Security extension and will support only non-secure interrupts. It is similar to CM33 non-secure part. Additionally CM55 core has support to block EWIC (External Wakeup Interrupt Controller). EWIC is a peripheral to the processor and it can be a source of wakeup in the system. EWIC block is disabled by default and needs to be enabled in order for the DS wakeup source to work.</p>
<div class="fragment"><div class="line"> </div>
<div class="line">    <span class="comment">/* Scenario: Vector table is relocated to RAM in __ramVectors[] */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Prototype of ISR function for port interrupt 0. For CY_IP_M7CPUSS port 21 is configured */</span></div>
<div class="line">    <span class="keywordtype">void</span> Interrupt_Handler_Port0 (<span class="keywordtype">void</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Initialize the interrupt with vector at Interrupt_Handler_Port0() */</span></div>
<div class="line">    <a class="code hl_function" href="group__group__sysint__functions.html#gab2ff6820a898e9af3f780000054eea5d">Cy_SysInt_Init</a>(&amp;intrCfg, &amp;Interrupt_Handler_Port0);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Enable the interrupt */</span></div>
<div class="line"><span class="preprocessor">#if (CY_IP_M7CPUSS)</span></div>
<div class="line">    NVIC_EnableIRQ((<a class="code hl_enumeration" href="group__group__sysint__enums.html#ga7e1129cd8a196f4284d41db3e82ad5c8">IRQn_Type</a>) NvicMux3_IRQn);</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">    NVIC_EnableIRQ(intrCfg.intrSrc);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="ttc" id="agroup__group__sysint__enums_html_ga7e1129cd8a196f4284d41db3e82ad5c8"><div class="ttname"><a href="group__group__sysint__enums.html#ga7e1129cd8a196f4284d41db3e82ad5c8">IRQn_Type</a></div><div class="ttdeci">IRQn_Type</div><div class="ttdoc">The enumerated type representing interrupt numbers. Interrupt numbers are device-dependent....</div><div class="ttdef"><b>Definition:</b> irqn_type.h:12</div></div>
<div class="ttc" id="agroup__group__sysint__functions_html_gab2ff6820a898e9af3f780000054eea5d"><div class="ttname"><a href="group__group__sysint__functions.html#gab2ff6820a898e9af3f780000054eea5d">Cy_SysInt_Init</a></div><div class="ttdeci">cy_en_sysint_status_t Cy_SysInt_Init(const cy_stc_sysint_t *config, cy_israddress userIsr)</div><div class="ttdoc">Initializes the referenced interrupt by setting the priority and the interrupt vector.</div></div>
</div><!-- fragment --><h1><a class="anchor" id="group_sysint_driver_usage"></a>
Driver Usage</h1>
<h2><a class="anchor" id="group_sysint_initialization"></a>
Initialization</h2>
<p >Interrupt numbers are defined in a device-specific header file, such as cy8c68237bz_ble.h, and are consistent with interrupt handlers defined in the vector table.</p>
<p >To configure an interrupt, call <a class="el" href="group__group__sysint__functions.html#gab2ff6820a898e9af3f780000054eea5d" title="Initializes the referenced interrupt by setting the priority and the interrupt vector.">Cy_SysInt_Init()</a>. Populate the configuration structure (<a class="el" href="structcy__stc__sysint__t.html" title="Initialization configuration structure for a single interrupt channel.">cy_stc_sysint_t</a>) and pass it as a parameter along with the ISR address. This initializes the interrupt and instructs the CPU to jump to the specified ISR vector upon a valid trigger. For CM0+ core, the configuration structure (<a class="el" href="structcy__stc__sysint__t.html" title="Initialization configuration structure for a single interrupt channel.">cy_stc_sysint_t</a>) must specify the device interrupt source (cm0pSrc) that feeds into the CM0+ NVIC mux (intrSrc).</p>
<p >For CM4/CM33/CM55 core, system interrupt source 'n' is connected to the corresponding IRQn. Deep-sleep capable interrupts are allocated to Deep Sleep capable IRQn channels.</p>
<h2><a class="anchor" id="group_sysint_enable"></a>
Enable</h2>
<p >After initializing an interrupt, use the CMSIS Core <a href="https://www.keil.com/pack/doc/CMSIS/Core/html/group__NVIC__gr.html#ga530ad9fda2ed1c8b70e439ecfe80591f">NVIC_EnableIRQ()</a> function to enable it. Given an initialization structure named config, the function should be called as follows: </p><div class="fragment"><div class="line">NVIC_EnableIRQ(config.intrSrc)</div>
</div><!-- fragment --><h2><a class="anchor" id="group_sysint_service"></a>
Writing an interrupt service routine</h2>
<p >Servicing interrupts in the Peripheral Drivers should follow a prescribed recipe to ensure all interrupts are serviced and duplicate interrupts are not received. Any peripheral-specific register that must be written to clear the source of the interrupt should be written as soon as possible in the interrupt service routine. However, note that due to buffering on the output bus to the peripherals, the write clearing of the interrupt may be delayed. After performing the normal interrupt service that should respond to the interrupting condition, the interrupt register that was initially written to clear the register should be read before returning from the interrupt service routine. This read ensures that the initial write has been flushed out to the hardware. Note, no additional processing should be performed based on the result of this read, as this read is intended only to ensure the write operation is flushed.</p>
<p >This final read may indicate a pending interrupt. What this means is that in the interval between when the write actually happened at the peripheral and when the read actually happened at the peripheral, an interrupting condition occurred. This is ok and a return from the interrupt is still the correct action. As soon as conditions warrant, meaning interrupts are enabled and there are no higher priority interrupts pending, the interrupt will be triggered again to service the additional condition.</p>
<h1><a class="anchor" id="group_sysint_more_information"></a>
More Information</h1>
<p >Refer to the technical reference manual (TRM) and the device datasheet.</p>
<h1><a class="anchor" id="group_sysint_changelog"></a>
Changelog</h1>
<table class="doxtable">
<tr>
<th>Version</th><th>Changes</th><th>Reason for Change </th></tr>
<tr>
<td>1.130 </td><td>Updated API <a class="el" href="group__group__sysint__functions.html#ga6628d90db5d0e0e8801535e2f1519266">Cy_SysInt_SetVector</a> for non-cacheable data check . </td><td>Code enhancement.  </td></tr>
<tr>
<td>1.120 </td><td>Updated Pre-processor checks. </td><td>Code enhancement.  </td></tr>
<tr>
<td>1.110 </td><td>Updated API <a class="el" href="group__group__sysint__functions.html#gab2ff6820a898e9af3f780000054eea5d">Cy_SysInt_Init</a>. </td><td>CM0P interrupt priority bug fix.  </td></tr>
<tr>
<td>1.100 </td><td>Added support for TRAVEO&trade; II Body Entry devices.<br  />
 Pre-processor check for MXS40SRSS version now groups ver. 2 with ver. 3. Previously ver. 2 was grouped with ver. 1. Added support for CM0+/CM4 dual core devices. Previously only supported CM0+/CM7 devices. </td><td>Code enhancement and support for new devices.  </td></tr>
<tr>
<td>1.90.1 </td><td>Fixed MISRA 2012 8.5 and 8.6 violations. </td><td>MISRA 2012 compliance..  </td></tr>
<tr>
<td>1.90 </td><td>Updated <a class="el" href="group__group__sysint__functions.html#gab2ff6820a898e9af3f780000054eea5d">Cy_SysInt_Init</a>, <a class="el" href="group__group__sysint__functions.html#ga6628d90db5d0e0e8801535e2f1519266">Cy_SysInt_SetVector</a> and <a class="el" href="group__group__sysint__functions.html#gac3feeb7969667eebe109ecab98dbfbb2">Cy_SysInt_GetVector</a> APIs. </td><td>Code Clean up.  </td></tr>
<tr>
<td>1.80 </td><td>API's Cy_SysInt_SetInterruptSource(), Cy_SysInt_GetInterruptSource(), Cy_SysInt_DisconnectInterruptSource(), <a class="el" href="group__group__sysint__functions.html#ga7408282c7e26c82dcf6fe0949c393dcf" title="Sets the interrupt source of the CPU core NMI.">Cy_SysInt_SetNmiSource()</a>, <a class="el" href="group__group__sysint__functions.html#gac6f71ee79199c4da9f084985e2bbbb7d" title="Gets the interrupt source of the CPU core NMI for the given NMI source number.">Cy_SysInt_GetNmiSource()</a>, <a class="el" href="group__group__sysint__functions.html#gab2c1e70c5151e021f2e7283408617acd" title="Triggers an interrupt using software (Not applicable for CM0+).">Cy_SysInt_SoftwareTrig()</a>, Cy_SysInt_GetNvicConnection(), Cy_SysInt_GetInterruptActive(), Cy_SysInt_InitExtIRQ(), Cy_SysInt_InitIntIRQ(), <a class="el" href="group__group__sysint__functions.html#gab2ff6820a898e9af3f780000054eea5d" title="Initializes the referenced interrupt by setting the priority and the interrupt vector.">Cy_SysInt_Init()</a>, <a class="el" href="group__group__sysint__functions.html#ga6628d90db5d0e0e8801535e2f1519266" title="Changes the ISR vector for the interrupt.">Cy_SysInt_SetVector()</a>, <a class="el" href="group__group__sysint__functions.html#gac3feeb7969667eebe109ecab98dbfbb2" title="Gets the address of the current ISR vector for the interrupt.">Cy_SysInt_GetVector()</a>, Cy_SysInt_SetSystemIrqVector(), Cy_SysInt_EnableSystemInt(), Cy_SysInt_DisableSystemInt() modified. </td><td>New device support, Fix Coverity issues, Documentation enhancement.  </td></tr>
<tr>
<td>1.70 </td><td>Support for CAT1C, PSE8.<br  />
Newly added API's Cy_SysInt_SetSystemIrqVector() to set the user ISR vector for the System Interrupt, Cy_SysInt_GetSystemIrqVector() to get the address of the current user ISR vector for the System Interrupt, Cy_SysInt_EnableSystemInt() to enable system interrupt, Cy_SysInt_DisableSystemInt() to disable system interrupt, Cy_SysInt_InitExtIRQ() to initialize the referenced external interrupt by setting the CPU IRQ priority and the interrupt vector, Cy_SysInt_InitIntIRQ() to initialize the referenced internal interrupt by setting the priority and the interrupt vector. </td><td><p class="starttd">New devices support. </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>1.60 </td><td>Support for CM33. </td><td>New devices support.  </td></tr>
<tr>
<td>1.50 </td><td>Fixed MISRA 2012 violations. </td><td>MISRA 2012 compliance.  </td></tr>
<tr>
<td>1.40 </td><td>Updated the CY_SYSINT_IS_PC_0 macro to access the protected register for the secure CYB06xx7 devices via group_pra driver.  </td><td>Added PSoC 64 devices support.  </td></tr>
<tr>
<td>1.30.1 </td><td>Minor documentation updates. </td><td>Documentation enhancement.  </td></tr>
<tr>
<td>1.30 </td><td>The Cy_SysInt_SetNmiSource is updated with Protection Context check for CM0+. </td><td>User experience enhancement.  </td></tr>
<tr>
<td>1.20.1 </td><td>The Vector Table section is extended with a code snippet. </td><td>Documentation enhancement.  </td></tr>
<tr>
<td rowspan="3">1.20 </td><td>Flattened the organization of the driver source code into the single source directory and the single include directory. </td><td>Driver library directory-structure simplification.  </td></tr>
<tr>
<td><p class="starttd">Added CPUSS_ver2 support to the following API functions:</p><ul>
<li>Cy_SysInt_SetInterruptSource</li>
<li><a class="el" href="group__group__sysint__functions.html#ga7408282c7e26c82dcf6fe0949c393dcf">Cy_SysInt_SetNmiSource</a></li>
<li><a class="el" href="group__group__sysint__functions.html#gac6f71ee79199c4da9f084985e2bbbb7d">Cy_SysInt_GetNmiSource</a></li>
</ul>
<p class="intertd">Added new API functions:</p><ul>
<li>Cy_SysInt_DisconnectInterruptSource</li>
<li>Cy_SysInt_GetNvicConnection</li>
<li>Cy_SysInt_GetInterruptActive</li>
</ul>
<p class="endtd">Deprecated following functions:</p><ul>
<li>Cy_SysInt_SetIntSource</li>
<li>Cy_SysInt_GetIntSource</li>
<li>Cy_SysInt_SetIntSourceNMI</li>
<li>Cy_SysInt_GetIntSourceNMI  </li>
</ul>
</td><td>New devices support.  </td></tr>
<tr>
<td>Added register access layer. Use register access macros instead of direct register access using dereferenced pointers. </td><td>Makes register access device-independent, so that the PDL does not need to be recompiled for each supported part number.  </td></tr>
<tr>
<td>1.10 </td><td>Cy_SysInt_GetState() function is redefined to call NVIC_GetEnableIRQ() </td><td></td></tr>
<tr>
<td>1.0 </td><td>Initial version </td><td></td></tr>
</table>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="groups" name="groups"></a>
API Reference</h2></td></tr>
<tr class="memitem:group__group__sysint__macros"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysint__macros.html">Macros</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysint__globals"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysint__globals.html">Global variables</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysint__functions"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysint__functions.html">Functions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysint__data__structures"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysint__data__structures.html">Data Structures</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysint__enums"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysint__enums.html">Enumerated Types</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga06c8142ccb50c175443ac78951ea4d21"><td class="memItemLeft" align="right" valign="top"><a id="ga06c8142ccb50c175443ac78951ea4d21" name="ga06c8142ccb50c175443ac78951ea4d21"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CY_SYSINT_INTRSRC_MASK</b>&#160;&#160;&#160;(0x0FFFUL)</td></tr>
<tr class="memdesc:ga06c8142ccb50c175443ac78951ea4d21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bit 0-11 indicate system interrupt and bit 12-15 will indicate the CPU IRQ. <br /></td></tr>
<tr class="separator:ga06c8142ccb50c175443ac78951ea4d21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3b9f1b9de4f122495a8b6580ce500d9a"><td class="memItemLeft" align="right" valign="top"><a id="ga3b9f1b9de4f122495a8b6580ce500d9a" name="ga3b9f1b9de4f122495a8b6580ce500d9a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CY_SYSINT_INTRSRC_MUXIRQ_SHIFT</b>&#160;&#160;&#160;(12UL)</td></tr>
<tr class="memdesc:ga3b9f1b9de4f122495a8b6580ce500d9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bit 0-11 indicate system interrupt and bit 12-15 will indicate the CPU IRQ. <br /></td></tr>
<tr class="separator:ga3b9f1b9de4f122495a8b6580ce500d9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>MTB Peripheral Driver Library (PDL)</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
